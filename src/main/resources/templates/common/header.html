<!-- templates/common/header.html -->
<header th:fragment="header">
  <nav class="navbar-custom"
       th:classappend="${isLoginPage != null and isLoginPage} ? ' justify-content-center' : ' justify-content-between'">
     <!-- ブランド：ログイン画面では非リンク、その他はトップへリンク -->
    <th:block th:if="${isLoginPage != null and isLoginPage}">
      <span class="navbar-brand-custom">
        <span class="brand-text">My Portfolio</span>
      </span>
    </th:block>
    <th:block th:if="${isLoginPage == null or !isLoginPage}">
      <a class="navbar-brand-custom" th:href="@{/}" title="トップページへ">
        <span class="brand-text">My Portfolio</span>
      </a>
    </th:block>

    <!-- ログインページではログイン・ログアウトボタン非表示 -->
    <th:block th:if="${isLoginPage != null and !isLoginPage}">
      <!-- 未ログインの場合ログインボタン -->
      <th:block th:if="${session != null and session.loginUser == null}">
        <button onclick="location.href='/login'" class="login-button">ログイン</button>
      </th:block>

      <!-- ログイン済みの場合ログアウトボタン -->
      <th:block th:if="${session != null and session.loginUser != null}">
        <form th:action="@{/logout}" method="post" style="display:inline;">
          <button type="submit" class="login-button">ログアウト</button>
        </form>
      </th:block>
    </th:block>
  </nav>
</header>